<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="copyright" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.rights.owner" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="NaiveBayesPredict_MLE" />
<meta name="abstract" content="This Machine Learning Engine function uses a model output by Naive Bayes Classifier to make predictions about testing data." />
<meta name="description" content="This Machine Learning Engine function uses a model output by Naive Bayes Classifier to make predictions about testing data." />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="flg1506116560459" />
<meta name="DC.Language" content="en-us" />

<link rel="stylesheet" type="text/css" href="css/normal_styles.css" />
<title>NaiveBayesPredict_MLE</title>
</head>
<body>
<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="flg1506116560459" id="flg1506116560459">
	<h1 class="title topictitle1" id="ariaid-title1">NaiveBayesPredict_MLE</h1>

	<div class="body conbody">
		<p class="p">The NaiveBayesPredict_MLE function uses the model output by the Naive Bayes Classifier function to predict the outcomes for a test set of data.</p>

	</div>

<div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="djr1506116663965" xml:lang="en-us" lang="en-us" id="djr1506116663965"><h2 class="title topictitle2" id="ariaid-title2">NaiveBayesPredict_MLE Syntax</h2>
<div class="body refbody"><div class="section" id="djr1506116663965__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">Version 1.12</h3><pre class="pre codeblock"><code>SELECT * FROM NaiveBayesPredict_MLE (
  <span class="ph">ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS InputTable PARTITION BY ANY
  <span class="ph">ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span> AS Model DIMENSION
  USING
  IDColumn ('<var class="keyword varname">test_point_id_col</var>')
  [ NumericInputs ({ '<var class="keyword varname">numeric_input_column</var>' | <var class="keyword varname">numeric_input_column_range</var> }[,...] ) ]
  [ CategoricalInputs ({ '<var class="keyword varname">categorical_input_column</var>' | <var class="keyword varname">categorical_input_column_range</var> }[,...] ) ]
  Responses ('<var class="keyword varname">response</var>' [,...])
  [ OutputProb (<span class="keyword">{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</span>) ]
  <code class="ph codeph">[ Accumulate ({ '<var class="keyword varname">accumulate_column</var>' | <var class="keyword varname">accumulate_column_range</var> }[,...]) ]</code>
) AS <var class="keyword varname">alias</var>;</code></pre></div>
</div>
<div class="related-links">
<div class="linklistheader">Related Information</div>
<ul class="linklist linklist">
<div class="linklistmember"><a class="link" href="eta1543514041091.html" title="See the format for comments in queries that call Machine Learning Engine analytic functions.">Comments in Queries</a></div>
<div class="linklistmember"><a class="link" href="ndv1557782188375.html" title="See the syntax details for Machine Learning Engine analytic functions with syntax elements that specify ( {'column' | column_range }[,...] ).">Column Specification Syntax Elements</a></div></ul>
</div></div>
<div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="ruv1506116762514" xml:lang="en-us" lang="en-us" id="ruv1506116762514">
	<h2 class="title topictitle2" id="ariaid-title3">NaiveBayesPredict_MLE Syntax Elements</h2>

	<div class="body refbody">
		<div class="section" id="ruv1506116762514__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">IDColumn</dt>
<dd class="dd pd">Specify the name of the InputTable column that contains the ID that uniquely identifies the test input data.</dd>
<dt class="dt pt dlterm">NumericInputs</dt>
<dd class="dd pd">[Required if you omit CategoricalInputs.] Specify the same <var class="keyword varname">numeric_input_columns</var> that you specified when you used the NaiveBayesMap and NaiveBayesReduce functions to create the model table from the training data.</dd>
<dt class="dt pt dlterm">CategoricalInputs</dt>
<dd class="dd pd">[Required if you omit NumericInputs.] Specify the same <var class="keyword varname">categorical_input_columns</var> that you specified when you used the NaiveBayesMap and NaiveBayesReduce functions to create the model table from the training data.<div class="note note" id="ruv1506116762514__note_N10040_N10037_N10030_N10017_N10013_N10010_N10001"><span class="notetitle">Note</span><div class="notebody">For information about columns that you must identify as categorical, see <a class="xref" href="uxa1540574678350.html" title="Learn which Machine Learning Engine analytic functions require identification of categorical input columns and what kind of input is considered categorical.">Identification of Categorical Columns</a>.</div></div>
</dd>
<dt class="dt pt dlterm">Responses</dt>
<dd class="dd pd">Specify the responses to output.</dd>
<dt class="dt pt dlterm">OutputProb</dt>
<dd class="dd pd">Specify whether to output the calculated probability for each selected response.</dd>
<dd class="dd pd ddexpand">Default: 'false'</dd>
<dt class="dt pt dlterm">Accumulate</dt>
<dd class="dd pd">[Optional] Specify the names of the InputTable columns to copy to the output table.</dd>
</dl>
</div>

	</div>

</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="fsu1506116895907" xml:lang="en-us" lang="en-us" id="fsu1506116895907"><h2 class="title topictitle2" id="ariaid-title4">NaiveBayesPredict_MLE Input</h2>
<div class="body refbody"><div class="section" id="fsu1506116895907__section_N1000E_N1000C_N10001">
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="fsu1506116895907__table_lqp_yc2_ycb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:50%" /><col style="width:50%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d284682e230">Table</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d284682e232">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d284682e230 ">InputTable</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d284682e232 ">Contains test data. Has same schema as <a class="xref" href="cht1541532841144.html#sep1506115202927" title="">Naive Bayes Classifier Input</a> table.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d284682e230 ">Model</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d284682e232 "><a class="xref" href="cht1541532841144.html#wgb1506115275695" title="">Naive Bayes Classifier Output</a> output table.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="gks1506116993188" xml:lang="en-us" lang="en-us" id="gks1506116993188"><h2 class="title topictitle2" id="ariaid-title5">NaiveBayesPredict_MLE Output</h2>
<div class="body refbody"><div class="section" id="gks1506116993188__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">Output Table Schema</h3><p class="p">Each row of the table represents one observation.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="gks1506116993188__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:33.33333333333333%" /><col style="width:16.666666666666664%" /><col style="width:50%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d284682e273">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d284682e275">Data Type</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d284682e277">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d284682e273 ">id</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d284682e275 ">INTEGER</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d284682e277 ">Row (observation) identifier.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d284682e273 ">prediction</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d284682e275 ">VARCHAR</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d284682e277 ">Prediction for observation.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d284682e273 ">loglik_<var class="keyword varname">response</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d284682e275 ">DOUBLE PRECISION</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d284682e277 ">[Column appears once for each specified <var class="keyword varname">response</var>.] Loglikelihood (natural logarithm of probability) that observation has <var class="keyword varname">response</var>.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d284682e273 ">prob_<var class="keyword varname">response</var></td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d284682e275 ">DOUBLE PRECISION</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d284682e277 ">[Column appears once for each specified <var class="keyword varname">response</var>.] Probability that observation has <var class="keyword varname">response</var>.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="fpf1526675821937" xml:lang="en-us" lang="en-us" id="fpf1526675821937">
	<h2 class="title topictitle2" id="ariaid-title6">NaiveBayesPredict_MLE Example</h2>

	<div class="body refbody">
		<div class="section" id="fpf1526675821937__section_N10011_N1000E_N10001"><h3 class="title sectiontitle">Input</h3><ul class="ul" id="fpf1526675821937__ul_dnb_5nf_wdb"><li class="li">InputTable: nb_iris_input_test, from <a class="xref" href="cht1541532841144.html#tpn1532017598261" title="">Naive Bayes Classifier Example</a></li>
<li class="li">Model: nb_iris_model output by <a class="xref" href="cht1541532841144.html#tpn1532017598261" title="">Naive Bayes Classifier Example</a></li>
</ul>

		</div>
<div class="section" id="fpf1526675821937__section_ujq_tmf_wdb"><h3 class="title sectiontitle">SQL Call</h3><pre class="pre codeblock"><code>CREATE TABLE nb_iris_predict AS (
  SELECT * FROM NaiveBayesPredict_MLE (
    ON nb_iris_input_test <span class="ph b">PARTITION BY ANY</span>
    <span class="ph b">ON nb_iris_model AS model DIMENSION</span>
    USING
    IDColumn ('id')
    NumericInputs ('[1:4]')
    <span class="ph b">Responses ('virginica', 'setosa', 'versicolor')</span>
    OutputProb('t')
    ) AS dt
) WITH DATA;</code></pre></div>
<div class="section" id="fpf1526675821937__section_n5j_5mf_wdb"><h3 class="title sectiontitle">Output</h3><p class="p">This query returns the following table:</p>
<pre class="pre codeblock"><code>SELECT * FROM nb_iris_predict ORDER BY id;</code></pre><p class="p">The output provides a prediction for each row in the test data set and shows the log likelihood and corresponding probability values that were used to make the predictions for each category.</p>
<pre class="pre screen"> id  prediction loglik_virginica    loglik_setosa        loglik_versicolor   prob_virginica         prob_setosa            prob_versicolor        
 --- ---------- ------------------- -------------------- ------------------- ---------------------- ---------------------- ---------------------- 
   5 setosa     -60.990734253263504   0.9404245089472999  -38.23198294967012 1.2695198379533435E-27                    1.0   9.71940317924901E-18
  10 setosa      -61.58619821439369 -0.17304369612032777  -37.66608359194052  2.131110046508006E-27                    1.0  5.211703059012073E-17
  15 setosa      -64.71695683575356    -3.55476298603102 -42.613273091194195  2.739029501478155E-27                    1.0 1.0891923690024204E-17
  20 setosa      -57.79928557069812   0.5317966964588929 -35.761305765776314 4.6465738923573095E-26     0.9999999999999998 1.7302380940689745E-16
  25 setosa      -55.09391552619634  -3.2370318008146173 -32.117985910900344 3.0119069413102237E-23     0.9999999999997136 2.8652399499869745E-13
  30 setosa     -58.067307546812884  0.10961171820769827  -34.92859901787489   5.42106967410162E-26     0.9999999999999993  6.068738461889238E-16
  35 setosa     -58.198028158940886   0.6602027864226648 -34.933599515507424  2.742805968486149E-26     0.9999999999999997   3.48183406795067E-16
  40 setosa      -58.35388608250933   0.9768407808212478 -35.442558011140925 1.7099866346922702E-26     0.9999999999999999 1.5249516367387455E-16
  45 setosa      -50.38476101165091   -4.369215787004387  -29.05374789421166 1.0368182360203043E-20      0.999999999980961  1.903899051337528E-11
  50 setosa     -59.474535549159874   1.0025797130664609 -36.502602214464886   5.43403661228925E-27                    1.0  5.148805022922067E-17
  55 versicolor  -5.221080105821829   -270.4654904532394 -1.7396368596493992    0.02984486347374556                    0.0     0.9701551365262544
  60 versicolor -11.335646463678362  -174.56549409208046  -2.319252419114942  1.2138837517511092E-4 1.5644258784333062E-75     0.9998786116248249
  65 versicolor -12.649647748539188  -138.43575851289683  -2.189800136664341  2.8663779342411874E-5  6.747138838325088E-60     0.9999713362206575
  70 versicolor -15.236844832532645  -152.47257400437167 -2.3538461309784644   2.540877047013271E-6  6.371823697392144E-66     0.9999974591229529
  75 versicolor  -8.346325661919643  -214.38367320704464 -1.1472748376909605   7.467367534737606E-4  2.467654883660264E-93     0.9992532632465262
  80 versicolor -18.455946846109452  -109.90097602090296  -3.727429862843837   4.013157212723945E-7  7.752015013752797E-47     0.9999995986842788
  85 versicolor  -7.002831886241749  -249.65653395348528 -2.0045561157689042   0.006704323455297395                    0.0     0.9932956765447026
  90 versicolor -12.027992226495456  -177.47037184770375 -1.7453975071096566   3.422244158442146E-5  4.826123690600991E-77     0.9999657775584156
  95 versicolor -10.180243946029357  -198.03717180240537 -1.1056729705329262  1.1452865426266493E-4  2.976370575042397E-86     0.9998854713457372
 100 versicolor -10.131539436020182  -187.29500562368133 -1.0288528197041062   1.113538068919299E-4 1.2752323133135041E-81     0.9998886461931081
 105 virginica  -1.5832164154434905   -540.5635710813433  -14.85964106733729     0.9999982855639519                    0.0   1.714436048134742E-6
 110 virginica   -6.113020624561468   -654.8021108771111  -28.83851492549933      0.999999999864966                    0.0  1.350340292044474E-10
 115 virginica  -3.6463518709972518  -456.64764580224687 -15.329878398979325     0.9999915684923585                    0.0   8.431507641564082E-6
 120 versicolor  -7.736150994583292  -322.90906957999925   -3.53629441822891   0.014776119478681243                    0.0     0.9852238805213187
 125 virginica  -1.8762709809140221   -509.8171593744312 -13.751542793349264     0.9999930396359074                    0.0   6.960364092651829E-6
 130 virginica   -3.369081146829314   -469.8029906143188  -9.138327814224688      0.996887608609285                    0.0   0.003112391390714933
 135 versicolor  -5.814829599870933  -403.67826879918823  -4.516448942741908    0.21443767585554682                    0.0     0.7855623241444533
 140 virginica  -1.4843093764923676  -463.61106264747457 -12.023861145012699     0.9999735321094436                    0.0  2.6467890556455832E-5
 145 virginica   -3.822666544684785   -576.3955856381103  -22.69421795258488     0.9999999936292677                    0.0   6.370732293282236E-9
 150 virginica  -2.5700464022369367  -366.50619806275694  -4.848872882106539      0.907108209897753                    0.0    0.09289179010224705</pre>
</div>
<div class="section" id="fpf1526675821937__section_qfn_wmf_wdb"><h3 class="title sectiontitle">Prediction Accuracy</h3><p class="p">The following SQL code calculates and displays the prediction accuracy.</p>
<pre class="pre codeblock"><code>DROP TABLE nb_predict_accuracy;</code></pre><pre class="pre codeblock"><code>CREATE MULTISET TABLE nb_predict_accuracy AS (
  SELECT nb_iris_input_test.id, species, prediction
  FROM nb_iris_predict, nb_iris_input_test
  WHERE nb_iris_input_test.id = nb_iris_predict.id
) WITH DATA;</code></pre><pre class="pre codeblock"><code>SELECT (
 SELECT count(id) FROM nb_predict_accuracy
  WHERE prediction = species) / (1.00 * ( 
        SELECT count(id) FROM nb_predict_accuracy) )
 AS prediction_accuracy ;</code></pre><pre class="pre screen"> prediction_accuracy 
 ------------------- 
                0.93</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="fpf1526675821937__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>

	</div>

</div>
</div>
</body>
</html>