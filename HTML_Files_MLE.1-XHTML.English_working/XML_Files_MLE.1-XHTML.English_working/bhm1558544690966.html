<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="copyright" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.rights.owner" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="NTree" />
<meta name="abstract" content="This Machine Learning Engine function builds and traverses tree structures on all worker nodes in a graph." />
<meta name="description" content="This Machine Learning Engine function builds and traverses tree structures on all worker nodes in a graph." />
<meta name="DC.Relation" scheme="URI" content="ngy1558544263564.html#bhu1507815860164" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="vcy1507767993321" />
<meta name="DC.Language" content="en-us" />

<link rel="stylesheet" type="text/css" href="css/normal_styles.css" />
<title>NTree</title>
</head>
<body>
<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="vcy1507767993321" id="vcy1507767993321">
	<h1 class="title topictitle1" id="ariaid-title1">NTree</h1>

	<div class="body conbody">
		<p class="p">The NTree function is a hierarchical analysis <span class="keyword">SQL</span> function that can build and traverse tree structures on all worker machines. The function reads the data only once from the disk and creates the trees in memory.</p>

		<p class="p">The input data must be partitionable, and each partition must fit in
			memory. Each partition can consist of multiple trees of any size. The function provides
			different ways of handling cycles.</p>

	</div>
<div class="related-links">
<div class="linklistheader">Related Information</div>
<ul class="linklist linklist relinfo">
<div class="linklistmember"><a class="link" href="ngy1558544263564.html#bhu1507815860164" title="This Machine Learning Engine function follows all paths in a graph, starting from a given set of root vertices, and calculates specified aggregate functions along those paths.">GTree</a></div></ul>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="chc1507768926190" xml:lang="en-us" lang="en-us" id="chc1507768926190"><h2 class="title topictitle2" id="ariaid-title2">NTree Syntax</h2>
<div class="body refbody"><div class="section" id="chc1507768926190__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">Version 1.3</h3><div class="note note" id="chc1507768926190__note_N10019_N10011_N1000E_N10001"><span class="notetitle">Note</span><div class="notebody">This function requires "@coprocessor".</div></div>
<pre class="pre codeblock"><code>SELECT * FROM NTree@coprocessor (
  <span class="ph">ON { <var class="keyword varname">table</var> | <var class="keyword varname">view</var> | (<var class="keyword varname">query</var>) }</span>
    PARTITION BY { 1 | <var class="keyword varname">partition_column</var> [,...] }
    [ ORDER BY <var class="keyword varname">ordering_column</var> [,...] ]
  USING
  RootNode (<var class="keyword varname">root_node_expression</var>)
  NodeID (<var class="keyword varname">node_id_expression</var>)
  ParentID (<var class="keyword varname">parent_id_expression</var>)
  [ AllowCycles (<span class="keyword">{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</span>) ]
  StartsWith ({ 'root' | 'leaf' | <var class="keyword varname">starting_node_id_expression</var> })
  Direction ({ 'up' | 'down' })
  OutputType ({ 'end' | 'all' })
  [ MaxDistance (<var class="keyword varname">max_distance</var>) ]
  [ OutputLogMessages (<span class="keyword">{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</span>)]
  Results (<var class="keyword varname">aggregate</var> [,...])
) AS <var class="keyword varname">alias</var>;</code></pre></div>
</div>
<div class="related-links">
<div class="linklistheader">Related Information</div>
<ul class="linklist linklist relinfo">
<div class="linklistmember"><a class="link" href="eta1543514041091.html" title="See the format for comments in queries that call Machine Learning Engine analytic functions.">Comments in Queries</a></div></ul>
</div></div>
<div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="wfw1507769030861" xml:lang="en-us" lang="en-us" id="wfw1507769030861">
	<h2 class="title topictitle2" id="ariaid-title3">NTree Syntax Elements</h2>

	<div class="body refbody">
		<div class="section" id="wfw1507769030861__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">RootNode</dt>
<dd class="dd pd">Specify the BOOLEAN SQL expression that defines the root nodes of the trees (for example, <var class="keyword varname">parent_id</var> IS NULL).</dd>
<dt class="dt pt dlterm">NodeID</dt>
<dd class="dd pd">Specify the SQL expression whose value uniquely identifies a node in the input table (for example, <var class="keyword varname">order_id</var>).<div class="note note" id="wfw1507769030861__note_N10052_N1004E_N10042_N10030_N10011_N1000E_N1000C_N10001"><span class="notetitle">Note</span><div class="notebody">A node can appear multiple times in the data set, with different parents.</div></div>
</dd>
<dt class="dt pt dlterm">ParentID</dt>
<dd class="dd pd">Specify the SQL expression whose value identifies the parent node.</dd>
<dt class="dt pt dlterm">AllowCycles</dt>
<dd class="dd pd">[Optional] Specify whether trees can contain cycles. If not, a cycle in the data set causes the function to throw an exception. For information about cycles, see <a class="xref" href="bhm1558544690966.html#ehz1507769293645" title="">Cycles in NTree</a>.</dd>
<dd class="dd pd ddexpand">Default: 'false'</dd>
<dt class="dt pt dlterm">StartsWith</dt>
<dd class="dd pd">Specify the node from which to start tree traversal—'root', 'leaf', or a SQL expression that identifies a node.</dd>
<dt class="dt pt dlterm">Direction</dt>
<dd class="dd pd">Specify the direction of tree traversal from the start node—up to the root node or down to the leaf nodes.</dd>
<dt class="dt pt dlterm">OutputType</dt>
<dd class="dd pd">Specify when to output a tuple—at every node along the traversal path ('all') or only at the end of the traversal path ('end').</dd>
<dt class="dt pt dlterm">MaxDistance</dt>
<dd class="dd pd">[Optional] Specify the maximum tree depth.</dd>
<dd class="dd pd ddexpand">Default: 5</dd>
<dt class="dt pt dlterm">OutputLogMessages</dt>
<dd class="dd pd">[Optional] Specify whether the function prints log messages.</dd>
<dd class="dd pd ddexpand">Default: 'false'</dd>
<dt class="dt pt dlterm">Results</dt>
<dd class="dd pd">Specify aggregate operations to perform during tree traversal, using this syntax:<pre class="pre codeblock"><code><var class="keyword varname">operation</var> (<var class="keyword varname">expression</var>) [ ALIAS <var class="keyword varname">alias</var> ]</code></pre><dl class="dl parml"><dt class="dt pt dlterm"><var class="keyword varname">operation</var></dt>
<dd class="dd pd">One of the following:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="wfw1507769030861__table_c2v_ztz_fdb" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:25%" /><col style="width:75%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d349084e240"><var class="keyword varname">operation</var></th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e243"><var class="keyword varname">operation</var> Action for Path from StartsWith Node to Last Traversed Node</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">PATH</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Outputs value of <var class="keyword varname">expression</var> for each node, separating values with '-&gt;'.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">SUM</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Computes value of <var class="keyword varname">expression</var> for each node and outputs sum of these values.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">LEVEL</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Outputs number of hops.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">MAX</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Computes value of <var class="keyword varname">expression</var> for each node and outputs highest of these values.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">MIN</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Computes value of <var class="keyword varname">expression</var> for each node and outputs lowest of these values.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">IS_CYCLE</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Outputs cycle (if any).</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">AVG</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Computes value of <var class="keyword varname">expression</var> for each node and outputs average of these values.</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e240 ">PROPAGATE</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e243 ">Evaluates <var class="keyword varname">expression</var> with value of StartsWith node and propagates result to every node.</td>
</tr>
</tbody>
</table>
</div>
</dd>
<dt class="dt pt dlterm"><var class="keyword varname">expression</var></dt>
<dd class="dd pd">SQL expression. Must be * if operation is LEVEL or IS_CYCLE.</dd>
<dt class="dt pt dlterm"><var class="keyword varname">alias</var></dt>
<dd class="dd pd">Name of the output table column that contains the result of the operation.<div class="note note" id="wfw1507769030861__note_N100E7_N100D7_N100CB_N10030_N10011_N1000E_N1000C_N10001"><span class="notetitle">Note</span><div class="notebody">The function ignores <var class="keyword varname">alias</var> if it is the same as an input table column name.</div></div>
</dd>
</dl>
</dd>
<dd class="dd pd ddexpand">Default: The string <code class="ph codeph"><var class="keyword varname">operation</var>(<var class="keyword varname">expression</var>)</code>; for example, <code class="ph codeph">PATH(<var class="keyword varname">node_name</var>)</code></dd>
</dl>
</div>

	</div>

</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="ehz1507769293645" xml:lang="en-us" lang="en-us" id="ehz1507769293645"><h2 class="title topictitle2" id="ariaid-title4">Cycles in NTree</h2>
<div class="body refbody"><div class="section" id="ehz1507769293645__section_N1000E_N1000C_N10001"><p class="p">A cycle is unidirectional; that is, the output can be different for Direction('up') and Direction('down'). For example, consider this table:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ehz1507769293645__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">emp_table_dept</span></div><colgroup><col style="width:25%" /><col style="width:25%" /><col style="width:6.25%" /><col style="width:12.5%" /><col style="width:18.75%" /><col style="width:12.5%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e365">department</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e367">order_column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e369">id</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e371">name</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e373">salary</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d349084e375">mgr_id</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">7</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Don</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">20000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">2</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Pat</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">30000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">3</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Donna</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">60000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">6</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">9</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Kim</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">50000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">5</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Fred</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">40000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">4</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">6</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Mark</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">70000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">7</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">7</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">6</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Rob</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">10000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">1</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">8</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Mark</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">10000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">1</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">9</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Dave</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">10000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">none</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Marketing</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">10</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Dave</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">10000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">9</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">10</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Peter</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">10000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">12</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">10</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Peter</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">10000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">none</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">11</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Sarah</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">20000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">10</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">12</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Sophia</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">30000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">10</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">15</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Elizabeth</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">40000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">12</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">16</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Richard</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">50000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">12</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">6</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">18</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Carter</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">60000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">17</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">7</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">11</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Sarah</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">20000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">15</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">8</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">13</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">John</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">70000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">11</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">9</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">14</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Jessica</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">80000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">11</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">10</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">14</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Jessica</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">80000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">12</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">11</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">15</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Elizabeth</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">40000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">14</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">12</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">16</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Richard</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">50000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">15</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e367 ">13</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e369 ">17</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e371 ">Gary</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e373 ">90000.00</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e375 ">16</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e365 ">Engineering</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e367 ">14</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e369 ">16</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e371 ">Richard</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e373 ">50000.00</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e375 ">18</td>
</tr>
</tbody>
</table>
</div>
<p class="p">This query returns the following table:</p>
<pre class="pre codeblock"><code>SELECT * FROM NTree@coprocessor (
  ON emp_table_dept
  PARTITION BY department
  ORDER BY order_column
  RootNode (mgr_id = 'none')
  ParentID (mgr_id)
  NodeID (id)
  StartsWith (id = '11')
  <span class="ph b">Direction ('up')</span>
  OutputType ('end')
  Results (PATH (name) AS path, path (id) AS path2, IS_CYCLE (*))
  AllowCycles ('true')
) ORDER BY path, path2;</code></pre>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ehz1507769293645__table_N102E4_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:5.555555555555555%" /><col style="width:50%" /><col style="width:27.77777777777778%" /><col style="width:16.666666666666664%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e720">id</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e722">path</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e724">path2</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d349084e726">is_cycle</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e720 ">14</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e722 ">Sarah-&gt;Elizabeth-&gt;Jessica</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e724 ">11-&gt;15-&gt;14</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e726 ">11</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e720 ">10</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e722 ">Sarah-&gt;Elizabeth-&gt;Jessica-&gt;Sophia-&gt;Peter</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e724 ">11-&gt;15-&gt;14-&gt;12-&gt;10</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e726 ">12</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e720 ">10</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e722 ">Sarah-&gt;Elizabeth-&gt;Sophia-&gt;Peter</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e724 ">11-&gt;15-&gt;12-&gt;10</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e726 ">12</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e720 ">12</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e722 ">Sarah-&gt;Peter-&gt;Sophia</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e724 ">11-&gt;10-&gt;12</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e726 ">10</td>
</tr>
</tbody>
</table>
</div>
<p class="p">If you specify Direction('down') in the preceding query, it returns the following table.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="ehz1507769293645__table_N1035E_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:4.761904761904762%" /><col style="width:52.38095238095239%" /><col style="width:28.57142857142857%" /><col style="width:14.285714285714285%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e775">id</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e777">path</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e779">path2</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d349084e781">is_cycle</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e775 ">15</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e777 ">Sarah-&gt;Jessica-&gt;Elizabeth</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e779 ">11-&gt;14-&gt;15</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e781 ">11</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e775 ">18</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e777 ">Sarah-&gt;Jessica-&gt;Elizabeth-&gt;Richard-&gt;Gary-&gt;Carter</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e779 ">11-&gt;14-&gt;15-&gt;16-&gt;17-&gt;18</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e781 ">16</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e775 ">13</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e777 ">Sarah-&gt;John</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e779 ">11-&gt;13</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e781 "> </td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="sdx1507769625314" xml:lang="en-us" lang="en-us" id="sdx1507769625314"><h2 class="title topictitle2" id="ariaid-title5">NTree Input</h2>
<div class="body refbody"><div class="section" id="sdx1507769625314__section_N10011_N1000E_N10001"><p class="p">The input table has the data from which to build trees. The only restriction on its schema is that the data must be partitionable and each partition must fit in memory.</p>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="srv1507769795649" xml:lang="en-us" lang="en-us" id="srv1507769795649"><h2 class="title topictitle2" id="ariaid-title6">NTree Output</h2>
<div class="body refbody"><div class="section" id="srv1507769795649__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">Output Table Schema</h3>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="srv1507769795649__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:17.24137931034483%" /><col style="width:13.793103448275861%" /><col style="width:68.96551724137932%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e842">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d349084e844">Data Type</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d349084e846">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e842 ">id</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d349084e844 ">INTEGER or VARCHAR</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d349084e846 ">Node identifier from <var class="keyword varname">node_id_expression</var>.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e842 ">alias</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d349084e844 ">VARCHAR</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e846 ">[Column appears once for each specified aggregate function.] Result of aggregate function.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title7" topicindex="7" topicid="cwy1510708611052" xml:lang="en-us" lang="en-us" id="cwy1510708611052"><h2 class="title topictitle2" id="ariaid-title7">NTree Examples</h2>
<div class="topic reference nested2" aria-labelledby="ariaid-title8" topicindex="8" topicid="gaz1526068794580" xml:lang="en-us" lang="en-us" id="gaz1526068794580">
	<h3 class="title topictitle3" id="ariaid-title8">NTree Example: Find Employee Reports</h3>

	<div class="body refbody"><div class="section" id="gaz1526068794580__section_kfc_qkg_5db"><h4 class="title sectiontitle">Input</h4><p class="p">The input table, employee_table, contains the data to build a tree of employees. Each row represents one employee, identifying both the employee and his or her manager by identifier and name. The employee with no manager, Don, becomes the root of the tree. The other employees become children of their managers.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="gaz1526068794580__table_cd4_jlg_5db" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">employee_table</span></div><colgroup><col style="width:25%" /><col style="width:25%" /><col style="width:25%" /><col style="width:25%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d349084e910">emp_id</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e912">emp_name</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e914">mgr_id</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e916">mgr_name</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e910 ">100</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e912 ">Don</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e914 ">NULL</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e916 ">NULL</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e910 ">200</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e912 ">Pat</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e914 ">100</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e916 ">Don</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e910 ">300</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e912 ">Donna</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e914 ">100</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e916 ">Don</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e910 ">400</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e912 ">Kim</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e914 ">200</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e916 ">Pat</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e910 ">500</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e912 ">Fred</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e914 ">400</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e916 ">Kim</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="gaz1526068794580__section_snw_mkg_5db"><h4 class="title sectiontitle">SQL Call</h4><p class="p">This call finds the employees who report to employee 100 (either directly or indirectly) by traversing the tree of employees from employee 100 downward.</p>
<pre class="pre codeblock"><code>SELECT * FROM NTree@coprocessor (
  ON employee_table PARTITION BY 1
  USING
  RootNode (mgr_id IS NULL)
  NodeID (emp_id)
  ParentID (mgr_id)
  Direction('Down')
  StartsWith(emp_id=100)
  OutputType('END')
  Results (PATH(emp_name) AS path)
) AS dt;</code></pre></div>
<div class="section" id="gaz1526068794580__section_hvl_nkg_5db"><h4 class="title sectiontitle">Output</h4><p class="p">The output table shows that employee 100, Don, has two direct reports, Donna and Pat, and two indirect reports, Kim (who reports to Pat) and Fred (who reports to Kim).</p>
<pre class="pre screen"> id  path                
 --- ------------------- 
 300 don-&gt;donna         
 500 don-&gt;pat-&gt;kim-&gt;fred</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="gaz1526068794580__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>
</div>

</div>
<div class="topic reference nested2" aria-labelledby="ariaid-title9" topicindex="9" topicid="fcn1526068836473" xml:lang="en-us" lang="en-us" id="fcn1526068836473">
	<h3 class="title topictitle3" id="ariaid-title9">NTree Example: Find Employee Management Chain</h3>

	<div class="body refbody"><div class="section" id="fcn1526068836473__section_nwq_pkg_5db"><h4 class="title sectiontitle">Input</h4><ul class="ul" id="fcn1526068836473__ul_ukm_wbq_j2b"><li class="li">employee_table, as in <a class="xref" href="bhm1558544690966.html#gaz1526068794580" title="See example of Machine Learning Engine function NTree that builds tree of employees and their managers and displays employees who report to a specified manager.">NTree Example: Find Employee Reports</a></li>
</ul>
</div>
<div class="section" id="fcn1526068836473__section_snw_mkg_5db"><h4 class="title sectiontitle">SQL Call</h4><p class="p">This call finds the management chain of employee 500 by traversing the tree of employees from employee 500 upward.</p>
<pre class="pre codeblock"><code>SELECT * FROM NTree@coprocessor (
  ON employee_table PARTITION BY 1
  USING
  RootNode (mgr_id IS NULL)
  NodeID (emp_id)
  ParentID (mgr_id)
  Direction ('Up') 
  StartsWith (emp_id=500) 
  OutputType ('END')
  Results (PATH(emp_name) AS path)
) AS dt ORDER BY 1;</code></pre></div>
<div class="section" id="fcn1526068836473__section_hvl_nkg_5db"><h4 class="title sectiontitle">Output</h4><p class="p">The output table shows that employee 500, Fred, reports to Kim, who reports to Pat, who reports to Don.</p>
<pre class="pre screen"> id  path                
 --- ------------------- 
 100 fred-&gt;kim-&gt;pat-&gt;don</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="fcn1526068836473__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>
</div>

</div>
<div class="topic reference nested2" aria-labelledby="ariaid-title10" topicindex="10" topicid="sok1526068868216" xml:lang="en-us" lang="en-us" id="sok1526068868216">
	<h3 class="title topictitle3" id="ariaid-title10">NTree Example: Show Reporting Structure by Department</h3>

	<div class="body refbody">
		<div class="section" id="sok1526068868216__section_N10011_N1000E_N10001"><h4 class="title sectiontitle">Input</h4><p class="p">The input table, emp_table_by_dept, contains data to build trees of departments, and is partitioned by department. In each partition, each row represents one employee in the department, identifying the employee by identifier and name and his or her manager by identifier. Each employee with no manager becomes the root of the department tree. The other employees in that department become children of their managers.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="sok1526068868216__table_rg3_4mg_5db" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">emp_table_by_dept</span></div><colgroup><col style="width:25%" /><col style="width:25%" /><col style="width:25%" /><col style="width:25%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d349084e1076">department</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e1078">id</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e1080">name</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d349084e1082">mgr_id</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">1</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Dave</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">none</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">2</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Kim</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">3</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Donna</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">4</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Rob</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">5</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Fran</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">2</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">6</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Mark</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">2</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">7</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Richard</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">3</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">8</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Pat</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">4</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Marketing</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">9</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Don</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">4</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">10</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Peter</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">none</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">11</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Sarah</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">10</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">12</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Dale</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">10</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">13</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">John</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">10</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">14</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Sophia</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">15</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">15</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Jessy</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">12</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">16</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Gary</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">12</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">17</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Elizabeth</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">13</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1076 ">Engineering</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1078 ">18</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1080 ">Richard</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d349084e1082 ">13</td>
</tr>
</tbody>
</table>
</div>

		</div>
<div class="section" id="sok1526068868216__section_snw_mkg_5db"><h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock"><code>SELECT * FROM NTree@coprocessor (
  ON emp_table_by_dept PARTITION BY department
  USING
  RootNode (mgr_id = 'none')
  ParentID (mgr_id)
  NodeID (id)
  StartsWith ('ROOT') 
  Direction ('DOWN')
  OutputType ('ALL')
  Results (PATH(name) AS path, PATH(id) AS path2)
) AS dt ORDER BY id;</code></pre></div>
<div class="section" id="sok1526068868216__section_hvl_nkg_5db"><h4 class="title sectiontitle">Output</h4><p class="p">The output table shows two department trees, whose roots are Dave and Peter.</p>
<pre class="pre screen"> id path                       path2          
 -- -------------------------- -------------- 
  1 Dave                       1             
  2 Dave-&gt;Kim                  1-&gt;2          
  3 Dave-&gt;Donna                1-&gt;3          
  4 Dave-&gt;Rob                  1-&gt;4          
  5 Dave-&gt;Kim-&gt;Fran            1-&gt;2-&gt;5       
  6 Dave-&gt;Kim-&gt;Mark            1-&gt;2-&gt;6       
  7 Dave-&gt;Donna-&gt;Richard       1-&gt;3-&gt;7       
  8 Dave-&gt;Rob-&gt;Pat             1-&gt;4-&gt;8       
  9 Dave-&gt;Rob-&gt;Don             1-&gt;4-&gt;9       
 10 Peter                      10            
 11 Peter-&gt;Sarah               10-&gt;11        
 12 Peter-&gt;Dale                10-&gt;12        
 13 Peter-&gt;John                10-&gt;13        
 14 Peter-&gt;Dale-&gt;Jessy-&gt;Sophia 10-&gt;12-&gt;15-&gt;14
 15 Peter-&gt;Dale-&gt;Jessy         10-&gt;12-&gt;15    
 16 Peter-&gt;Dale-&gt;Gary          10-&gt;12-&gt;16    
 17 Peter-&gt;John-&gt;Elizabeth     10-&gt;13-&gt;17    
 18 Peter-&gt;John-&gt;Richard       10-&gt;13-&gt;18</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="sok1526068868216__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>

	</div>

</div>
</div>
</div>
</body>
</html>