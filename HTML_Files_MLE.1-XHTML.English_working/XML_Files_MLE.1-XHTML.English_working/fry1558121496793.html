<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="copyright" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.rights.owner" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="LikelihoodRatioTest" />
<meta name="abstract" content="This Machine Learning Engine function performs the likelihood ratio test for two GLM models." />
<meta name="description" content="This Machine Learning Engine function performs the likelihood ratio test for two GLM models." />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="vio1507671576104" />
<meta name="DC.Language" content="en-us" />

<link rel="stylesheet" type="text/css" href="css/normal_styles.css" />
<title>LikelihoodRatioTest</title>
</head>
<body>
<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="vio1507671576104" id="vio1507671576104">
	<h1 class="title topictitle1" id="ariaid-title1">LikelihoodRatioTest</h1>

	<div class="body conbody"><p class="p">The LikelihoodRatioTest function performs the likelihood ratio test for two GLM models, output by the function <a class="xref" href="eej1558472403086.html#hrv1507149150084" title="This Machine Learning Engine function extends the linear regression model to enable linear equation to relate to dependent variables by a link function.">GLM</a>.</p>
</div>

<div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="syw1507671736070" xml:lang="en-us" lang="en-us" id="syw1507671736070"><h2 class="title topictitle2" id="ariaid-title2">LikelihoodRatioTest Syntax</h2>
<div class="body refbody"><div class="section" id="syw1507671736070__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">Version 1.3</h3><pre class="pre codeblock"><code>SELECT * FROM LikelihoodRatioTest (
  ON (SELECT * FROM <var class="keyword varname">glm_output1</var> WHERE attribute = -1) AS FirstModel PARTITION BY 1
  ON (SELECT * FROM <var class="keyword varname">glm_output2</var> WHERE attribute = -1) AS SecondModel PARTITION BY 1
  USING
  Statistic ('<var class="keyword varname">predictor_column</var>')
  LogLik ('<var class="keyword varname">estimate_column</var>')
  ObsNum ('<var class="keyword varname">std_err_column</var>')
  ParamNum ('<var class="keyword varname">z_score_column</var>')
) AS <var class="keyword varname">alias</var>;</code></pre></div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="fzk1507671747363" xml:lang="en-us" lang="en-us" id="fzk1507671747363">
	<h2 class="title topictitle2" id="ariaid-title3">LikelihoodRatioTest Syntax Elements</h2>

	<div class="body refbody">
		<div class="section" id="fzk1507671747363__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">Statistic</dt>
<dd class="dd pd">Specify the name of the input column that contains the name of the statistic. This column corresponds to the GLM output column predictor.</dd>
<dt class="dt pt dlterm">LogLik</dt>
<dd class="dd pd">Specify the name of the input column that contains the log-likelihood of the GLM model. This column corresponds to the GLM output column estimate.</dd>
<dt class="dt pt dlterm">ObsNum</dt>
<dd class="dd pd">Specify the name of the input column that contains the number of observations. This column corresponds to the GLM output column std_err.</dd>
<dt class="dt pt dlterm">ParamNum</dt>
<dd class="dd pd">Specify the name of the input column that contains the number of parameters (excluding the intercept). This column corresponds to the GLM output column z_score.</dd>
</dl>
</div>

	</div>

</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="ymd1507671766460" xml:lang="en-us" lang="en-us" id="ymd1507671766460"><h2 class="title topictitle2" id="ariaid-title4">LikelihoodRatioTest Input</h2>
<div class="body refbody"><div class="section" id="ymd1507671766460__section_N1000E_N1000C_N10001"><p class="p">The LikelihoodRatioTest requires two model tables, output by the function <a class="xref" href="eej1558472403086.html#hrv1507149150084" title="This Machine Learning Engine function extends the linear regression model to enable linear equation to relate to dependent variables by a link function.">GLM</a>. For their schema, see <a class="xref" href="eej1558472403086.html#mbl1507149903431" title="">GLM Output Table</a>.</p>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="xho1507671782989" xml:lang="en-us" lang="en-us" id="xho1507671782989"><h2 class="title topictitle2" id="ariaid-title5">LikelihoodRatioTest Output</h2>
<div class="body refbody"><div class="section" id="xho1507671782989__section_nym_qhw_xcb"><h3 class="title sectiontitle">Output Table Schema</h3>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="xho1507671782989__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:20%" /><col style="width:30%" /><col style="width:50%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d323806e172">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d323806e174">Data Type</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d323806e176">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323806e172 ">distribution</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323806e174 ">VARCHAR</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d323806e176 ">Type of Chi-squared distribution used for test.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323806e172 ">statistic</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d323806e174 ">DOUBLE PRECISION</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d323806e176 ">Value of Chi-squared statistic.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d323806e172 ">p_value</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d323806e174 ">DOUBLE PRECISION</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e176 ">Corresponding p-value for Chi-squared statistic.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="lnx1507671972960" xml:lang="en-us" lang="en-us" id="lnx1507671972960"><h2 class="title topictitle2" id="ariaid-title6">LikelihoodRatioTest Example</h2>
<div class="body refbody"><div class="section" id="lnx1507671972960__section_N10011_N1000E_N10001"><p class="p">This example uses the GLM function to create two models and then compares them with the LikelihoodRatioTest function.</p>
</div>
<div class="section" id="lnx1507671972960__section_xrv_lcg_n2b"><h3 class="title sectiontitle">Input</h3><p class="p">This is the input table for the two GLM calls:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="lnx1507671972960__table_prh_3dg_n2b" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">glm_tempdamage</span></div><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d323806e237">id</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d323806e239">temp</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d323806e241">damage</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">1</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">53</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">2</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">57</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">3</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">58</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">4</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">63</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">5</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">66</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">6</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">67</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">7</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">67</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">8</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">67</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">9</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">68</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">10</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">69</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">11</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">70</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">12</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">70</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">13</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">70</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">14</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">70</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">15</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">72</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">16</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">73</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">17</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">75</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">18</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">75</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">19</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">76</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">20</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">76</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">21</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">78</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e237 ">22</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e239 ">79</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d323806e241 ">0</td>
</tr>
</tbody>
</table>
</div>
<p class="p">This GLM call creates a model, damage_glm1, using the predictor variable temp (in the second row of damage_glm1):</p>
<pre class="pre codeblock"><code>SELECT * FROM GLM (
  ON glm_tempdamage AS InputTable
  <span class="ph b">OUT TABLE OutputTable (damage_glm1)</span>
  USING
  TargetColumns ('damage','temp')
  Family ('LOGISTIC')
  Link ('CANONICAL')
  StopThreshold ('0.01')
  MaxIterNum ('10')
) AS dt;</code></pre><pre class="pre screen"> predictor               estimate             std_error           z_score             p_value              significance                            
 ----------------------- -------------------- ------------------- ------------------- -------------------- --------------------------------------- 
 (Intercept)               14.805399894714355    7.44366979598999  1.9889899492263794  0.04670250043272972 *                                      
 temp                    -0.22856199741363525 0.10932400077581406 -2.0906898975372314 0.036556001752614975 *                                      
 ITERATIONS #                             4.0                 0.0                 0.0                  0.0 Number of Fisher Scoring iterations    
 ROWS #                                  22.0                 0.0                 0.0                  0.0 Number of rows                         
 Residual deviance          20.26799964904785                 0.0                 0.0                  0.0 on 20 degrees of freedom               
 Pearson goodness of fit   22.771900177001953                 0.0                 0.0                  0.0 on 20 degrees of freedom               
 AIC                        24.26799964904785                 0.0                 0.0                  0.0 Akaike information criterion           
 BIC                       26.450084686279297                 0.0                 0.0                  0.0 Bayesian information criterion         
 Wald Test                  6.039470195770264                 0.0                 0.0  0.04881415143609047 *                                      
 Dispersion parameter                     1.0                 0.0                 0.0                  0.0 Taken to be 1 for BINOMIAL and POISSON.
</pre>
<pre class="pre codeblock"><code>SELECT * FROM damage_glm1 ORDER BY 1;</code></pre><pre class="pre screen"> attribute predictor   category estimate             std_err             z_score             p_value              significance family   
 --------- ----------- -------- -------------------- ------------------- ------------------- -------------------- ------------ -------- 
        -1 Loglik      NULL      -10.133999824523926                22.0                 1.0                  0.0 NULL         LOGISTIC
         0 (Intercept) NULL       14.805399894714355    7.44366979598999  1.9889899492263794  0.04670250043272972 *            LOGISTIC
         1 temp        NULL     -0.22856199741363525 0.10932400077581406 -2.0906898975372314 0.036556001752614975 *            LOGISTIC</pre>
<p class="p">This GLM call creates the null model, produced with only the intercept:</p>
<pre class="pre codeblock"><code>SELECT * FROM GLM (
  ON glm_tempdamage AS InputTable
  <span class="ph b">OUT TABLE OutputTable(damage_glm2)
</span>
  USING
  InputColumns ('damage')
  Family ('LOGISTIC')
  LinkFunction ('CANONICAL')
  StopThreshold ('0.01')
  MaxIterNum ('10')
) AS dt;</code></pre><pre class="pre screen"> predictor               estimate            std_error          z_score             p_value             significance                            
 ----------------------- ------------------- ------------------ ------------------- ------------------- --------------------------------------- 
 (Intercept)             -0.7621399760246277 0.4577380120754242 -1.6650199890136719 0.09590969979763031 .                                      
 ITERATIONS #                            3.0                0.0                 0.0                 0.0 Number of Fisher Scoring iterations    
 ROWS #                                 22.0                0.0                 0.0                 0.0 Number of rows                         
 Residual deviance          27.5216007232666                0.0                 0.0                 0.0 on 21 degrees of freedom               
 Pearson goodness of fit                22.0                0.0                 0.0                 0.0 on 21 degrees of freedom               
 AIC                        29.5216007232666                0.0                 0.0                 0.0 Akaike information criterion           
 BIC                      30.612642288208008                0.0                 0.0                 0.0 Bayesian information criterion         
 Wald Test                 2.772279977798462                0.0                 0.0 0.09590946137905121 .                                      
 Dispersion parameter                    1.0                0.0                 0.0                 0.0 Taken to be 1 for BINOMIAL and POISSON.</pre>
<pre class="pre codeblock"><code>SELECT * FROM damage_glm2 ORDER BY 1;</code></pre><pre class="pre screen"> attribute predictor   category estimate            std_err            z_score             p_value             significance family   
 --------- ----------- -------- ------------------- ------------------ ------------------- ------------------- ------------ -------- 
        -1 Loglik      NULL       -13.7608003616333               22.0                 0.0                 0.0 NULL         LOGISTIC
         0 (Intercept) NULL     -0.7621399760246277 0.4577380120754242 -1.6650199890136719 0.09590969979763031 .            LOGISTIC</pre>
</div>
<div class="section" id="lnx1507671972960__section_drf_mcg_n2b"><h3 class="title sectiontitle">SQL Call</h3><pre class="pre codeblock"><code>SELECT * FROM LikelihoodRatioTest (
  ON (SELECT * FROM damage_glm1 WHERE attribute = -1) AS FirstModel 
    PARTITION BY 1
  ON (SELECT * FROM damage_glm2 WHERE attribute = -1) AS SecondModel 
    PARTITION BY 1
  USING
  statistic('predictor')
  loglik('estimate')
  ObsNum('std_err')
  ParamNum('z_score')
) AS dt;</code></pre></div>
<div class="section" id="lnx1507671972960__section_zhq_mcg_n2b"><h3 class="title sectiontitle">Output</h3><pre class="pre screen"> distribution       statistic        p_value              
 ------------------ ---------------- -------------------- 
 Chi-squared 1 d.f. 7.25360107421875 0.007075897417962551</pre>
<p class="p">The final output compares the two GLM distributions and displays a chi squared statistic and a p-value. The chi square value suggests, based on all predictors, that the data was more likely created by model 1 than by the null model. The result is statistically significant at the 95% confidence level (p-value &lt; 0.05).</p>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="lnx1507671972960__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>
</div>
</div>
</div>
</body>
</html>