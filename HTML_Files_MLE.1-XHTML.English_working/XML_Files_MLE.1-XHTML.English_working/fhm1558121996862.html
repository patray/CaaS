<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="copyright" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.rights.owner" content="(C) Copyright 2019, Teradata. All Rights Reserved." />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="VectorDistance" />
<meta name="abstract" content="This Machine Learning Engine function measures the distance between sparse vectors (for example, TF-IDF vectors) in a pairwise manner." />
<meta name="description" content="This Machine Learning Engine function measures the distance between sparse vectors (for example, TF-IDF vectors) in a pairwise manner." />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="gar1507748623789" />
<meta name="DC.Language" content="en-us" />

<link rel="stylesheet" type="text/css" href="css/normal_styles.css" />
<title>VectorDistance</title>
</head>
<body>
<div class="nested0" aria-labelledby="ariaid-title1" topicindex="1" topicid="gar1507748623789" id="gar1507748623789">
	<h1 class="title topictitle1" id="ariaid-title1">VectorDistance</h1>

	<div class="body conbody"><p class="p">The VectorDistance function takes a table of target vectors and a table of reference vectors and returns a table that contains the distance between each target-reference pair.</p>
<div class="fig fignone" id="gar1507748623789__fig_dys_lht_nw"><div class="caption"></div><br /><img class="image" id="gar1507748623789__image_ggd_mht_nw" src="gwe1466005512574.svg" alt="How Machine Learning Engine function VectorDistance works" /><br /></div>
<p class="p">Information retrieval and text mining applications use the vector distance between the Term Frequency Inverse Document Frequency (TF-IDF) representations of two documents to measure the similarity of their subject matter.</p>
</div>

<div class="topic reference nested1" aria-labelledby="ariaid-title2" topicindex="2" topicid="kki1507909769505" xml:lang="en-us" lang="en-us" id="kki1507909769505"><h2 class="title topictitle2" id="ariaid-title2">VectorDistance Syntax</h2>
<div class="body refbody"><div class="section" id="kki1507909769505__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">Version 1.3</h3><pre class="pre codeblock"><code>SELECT * FROM VectorDistance (
  ON <var class="keyword varname">target_input_table</var> AS TargetTable PARTITION BY <var class="keyword varname">target_id_column</var> [,...]
  ON <var class="keyword varname">ref_input_table</var> AS ReferenceTable DIMENSION
  USING
  TargetIDColumns ({ '<var class="keyword varname">target_id_column</var>' | <var class="keyword varname">target_id_column_range</var> }[,...])
  TargetFeatureColumn ('<var class="keyword varname">target_feature_column</var>')
  [ TargetValueColumn ('<var class="keyword varname">target_value_column</var>') ]
  [ RefIDColumns ({ '<var class="keyword varname">ref_id_column</var>' | <var class="keyword varname">ref_id_column_range</var> }[,...])
  [ RefTableSize ({ 'SMALL' | 'LARGE' }) ]
  [ RefFeatureColumn ('<var class="keyword varname">ref_feature_column</var>') ]
  [ RefValueColumn ('<var class="keyword varname">ref_value_column</var>') ]
  [ DistanceMeasure ({ 'cosine' | 'euclidean' | 'manhattan' | 'binary' }[,...])]
  [ IgnoreMismatch (<span class="keyword">{'true'|'t'|'yes'|'y'|'1'|'false'|'f'|'no'|'n'|'0'}</span>) ]
  [ ReplaceInvalid ({ 'PositiveInfinity' |'NegativeInfinity' | <var class="keyword varname">custom</var> })]
  [ TopK (<var class="keyword varname">k</var>) ]
  [ MaxDistance (<var class="keyword varname">threshold</var> [,...]) ]
) AS <var class="keyword varname">alias</var>;</code></pre></div>
</div>
<div class="related-links">
<div class="linklistheader">Related Information</div>
<ul class="linklist linklist relinfo">
<div class="linklistmember"><a class="link" href="ndv1557782188375.html" title="See the syntax details for Machine Learning Engine analytic functions with syntax elements that specify ( {'column' | column_range }[,...] ).">Column Specification Syntax Elements</a></div></ul>
</div></div>
<div class="topic reference nested1" aria-labelledby="ariaid-title3" topicindex="3" topicid="rus1507749886078" xml:lang="en-us" lang="en-us" id="rus1507749886078">
	<h2 class="title topictitle2" id="ariaid-title3">VectorDistance Syntax Elements</h2>

	<div class="body refbody">
		<div class="section" id="rus1507749886078__section_N10011_N1000E_N10001"><dl class="dl parml"><dt class="dt pt dlterm">TargetIDColumns</dt>
<dd class="dd pd">Specify the names of the columns that comprise the target vector identifier. You must partition the target input table by these columns and specify them with this syntax element.</dd>
<dt class="dt pt dlterm">TargetFeatureColumn</dt>
<dd class="dd pd">Specify the name of the column that contains the target vector feature name (for example, the axis of a 3-D vector).<div class="note note" id="rus1507749886078__note_N10052_N1004E_N10042_N10030_N10011_N1000E_N1000C_N10001"><span class="notetitle">Note</span><div class="notebody">The function drops any entry that has a NULL value in a <var class="keyword varname">feature_column</var>.</div></div>
</dd>
<dt class="dt pt dlterm">TargetValueColumn</dt>
<dd class="dd pd">[Optional] Specify the name of the column that contains the value for the target vector feature. If you omit this syntax element, each feature (that is, each row) has the target value 1.<div class="note note" id="rus1507749886078__note_N1006B_N10067_N1005B_N10030_N10011_N1000E_N1000C_N10001"><span class="notetitle">Note</span><div class="notebody">The function drops any entry that has a NULL value in a <var class="keyword varname">value_column</var>.</div></div>
</dd>
<dt class="dt pt dlterm">RefIDColumns</dt>
<dd class="dd pd">[Optional] Specify the names of the columns that comprise the reference vector identifier.</dd>
<dd class="dd pd ddexpand">Default: TargetIDColumns value</dd>
<dt class="dt pt dlterm">RefFeatureColumn</dt>
<dd class="dd pd">[Optional] Specify the name of the column that contains the reference vector feature name.<div class="note note" id="rus1507749886078__note_N10098_N10090_N10084_N10030_N10011_N1000E_N1000C_N10001"><span class="notetitle">Note</span><div class="notebody">The function drops any entry that has a NULL value in a <var class="keyword varname">feature_column</var>.</div></div>
</dd>
<dd class="dd pd ddexpand">Default: <var class="keyword varname">feature_column</var> (TargetFeatureColumn value)</dd>
<dt class="dt pt dlterm">RefValueColumn</dt>
<dd class="dd pd">[Optional] Specify the name of the column that contains the value for the reference vector feature.<div class="note note" id="rus1507749886078__note_N100B5_N100AD_N100A1_N10030_N10011_N1000E_N1000C_N10001"><span class="notetitle">Note</span><div class="notebody">The function drops any entry that has a NULL value in a <var class="keyword varname">value_column</var>.</div></div>
</dd>
<dd class="dd pd ddexpand">Default: TargetValueColumn syntax element value.</dd>
<dt class="dt pt dlterm">RefTableSize</dt>
<dd class="dd pd">[Optional] Specify the size of the ReferenceTable. Specify 'LARGE' only if the ReferenceTable does not fit in memory, because 'SMALL' allows faster processing.</dd>
<dd class="dd pd ddexpand">Default: 'SMALL'</dd>
<dt class="dt pt dlterm">DistanceMeasure</dt>
<dd class="dd pd">[Optional] Specify the distance measures that the function uses.<div class="note note" id="rus1507749886078__note_N100B4_N100B0_N100A9_N10018_N10014_N10010_N10001"><span class="notetitle">Note</span><div class="notebody">The binary distance between two vectors is 1 if the vectors are identical and 0 otherwise.</div></div>
</dd>
<dd class="dd pd ddexpand">Default: 'cosine'</dd>
<dt class="dt pt dlterm">IgnoreMismatch</dt>
<dd class="dd pd">[Optional] Specify whether to drop mismatched dimensions. If DistanceMeasure is 'cosine', this syntax element is 'false'. If you specify 'true', two vectors with no common features become two empty vectors when only their common features are considered, and the function cannot measure the distance between them.</dd>
<dd class="dd pd ddexpand">Default: 'true'</dd>
<dt class="dt pt dlterm">ReplaceInvalid</dt>
<dd class="dd pd">[Optional] Specify the value to return when the function encounters an infinite value or empty vectors. For <var class="keyword varname">custom</var>, you can supply any DOUBLE PRECISION value.</dd>
<dd class="dd pd ddexpand">Default: 'PositiveInfinity'</dd>
<dt class="dt pt dlterm">TopK</dt>
<dd class="dd pd">[Optional] Specify, for each target vector and for each measure, the maximum number of closest reference vectors to include in the output table. For k, you can supply any INTEGER value.</dd>
<dd class="dd pd ddexpand">Default: Maximum INTEGER value (2,147,483,647)</dd>
<dt class="dt pt dlterm">MaxDistance</dt>
<dd class="dd pd">[Optional] Specify the maximum distance between a pair of target and reference vectors. If the distance exceeds the threshold, the pair does not appear in the output table.</dd>
<dd class="dd pd ddexpand">If the DistanceMeasure syntax element specifies multiple measures, then the MaxDistance syntax element must specify a <var class="keyword varname">threshold</var> for each measure. The <var class="keyword varname">i</var>th <var class="keyword varname">threshold</var> corresponds to the ith measure. Each <var class="keyword varname">threshold</var> can be any DOUBLE PRECISION value.</dd>
<dd class="dd pd ddexpand">Default behavior: The function returns all results.</dd>
</dl>
</div>

	</div>

</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title4" topicindex="4" topicid="fks1507749896745" xml:lang="en-us" lang="en-us" id="fks1507749896745"><h2 class="title topictitle2" id="ariaid-title4">VectorDistance Input</h2>
<div class="body refbody"><div class="section" id="fks1507749896745__section_N1000E_N1000C_N10001"><h3 class="title sectiontitle">TargetTable Schema</h3><p class="p">This table has the target vectors.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="fks1507749896745__table_N10014_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:28.57142857142857%" /><col style="width:14.285714285714285%" /><col style="width:57.14285714285714%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e294">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e296">Data Type</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e298">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e294 "><var class="keyword varname">target_id_column</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e296 ">Any</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e298 ">[Column appears once for each specified <var class="keyword varname">target_id_column</var>.] All or part of target vector identifier.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e294 "><var class="keyword varname">target_feature_column</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e296 ">Any except VARBYTE(n)</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e298 ">Feature name of target vector.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e294 "><var class="keyword varname">target_value_column</var></td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e296 ">SMALLINT, INTEGER, BIGINT, NUMERIC, or DOUBLE PRECISION</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e298 ">Value of target vector.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="fks1507749896745__section_dqj_c3x_xcb"><h3 class="title sectiontitle">ReferenceTable Schema</h3><p class="p">This table has the reference vectors.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="fks1507749896745__table_N1006B_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:28.57142857142857%" /><col style="width:14.285714285714285%" /><col style="width:57.14285714285714%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e340">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e342">Data Type</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e344">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e340 "><var class="keyword varname">ref_id_column</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e342 ">Any</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e344 ">[Column appears once for each specified <var class="keyword varname">ref_id_column</var>.] All or part of reference vector identifier.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e340 "><var class="keyword varname">ref_feature_column</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e342 ">Any except VARBYTE(n)</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e344 ">Feature name of reference vector.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e340 "><var class="keyword varname">ref_value_column</var></td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e342 ">SMALLINT, INTEGER, BIGINT, NUMERIC, or DOUBLE PRECISION</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e344 ">Value of reference vector.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic reference nested1" aria-labelledby="ariaid-title5" topicindex="5" topicid="hrd1507750017570" xml:lang="en-us" lang="en-us" id="hrd1507750017570"><h2 class="title topictitle2" id="ariaid-title5">VectorDistance Output</h2>
<div class="body refbody"><div class="section" id="hrd1507750017570__section_yyc_m3x_xcb"><h3 class="title sectiontitle">Output Table Schema</h3>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="hrd1507750017570__table_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:30%" /><col style="width:20%" /><col style="width:50%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e393">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e395">Data Type</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e397">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e393 ">target_<var class="keyword varname">target_id_column</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e395 ">Same as in TargetTable</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e397 ">[Column appears once for each specified <var class="keyword varname">target_id_column</var>.] All or part of target vector identifier.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e393 ">ref_<var class="keyword varname">ref_id_column</var></td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e395 ">Same as in ReferenceTable</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e397 ">[Column appears once for each specified <var class="keyword varname">ref_id_column</var>.] All or part of reference vector identifier.</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e393 ">type</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e395 ">VARCHAR</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e397 ">Distance measurement type.</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e393 ">distance</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e395 ">DOUBLE PRECISION</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e397 ">Distance between target vector and reference vector.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title6" topicindex="6" topicid="nxx1510789096431" xml:lang="en-us" lang="en-us" id="nxx1510789096431"><h2 class="title topictitle2" id="ariaid-title6">VectorDistance Examples</h2>
<div class="topic reference nested2" aria-labelledby="ariaid-title7" topicindex="7" topicid="dxb1507750107365" xml:lang="en-us" lang="en-us" id="dxb1507750107365"><h3 class="title topictitle3" id="ariaid-title7">VectorDistance Examples Input</h3>
<div class="body refbody"><div class="section" id="dxb1507750107365__section_N1000E_N1000C_N10001"><h4 class="title sectiontitle">Raw Input</h4><div class="p">The raw input is mobile telephone user data where each user (who is identified with UserID) has these attributes (for a specific time period):
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dxb1507750107365__table_qvn_gh3_v1b" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:20%" /><col style="width:80%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d3725e467">Attribute</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d3725e469">Description</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e467 ">CallDuration</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e469 ">Total time spent on telephone calls (in minutes)</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e467 ">SMS</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e469 ">Number of Short Message Service (SMS) messages sent and received</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e467 ">DataCounter</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e469 ">Data consumed (in megabytes)</td>
</tr>
</tbody>
</table>
</div>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dxb1507750107365__table_u3w_dkt_nw" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:20%" /><col style="width:32%" /><col style="width:16%" /><col style="width:32%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e495">UserID</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e497">CallDuration</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e499">SMS</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e501">DataCounter</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e495 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e497 ">25000</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e499 ">24</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e501 ">4</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e495 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e497 ">40000</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e499 ">27</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e501 ">5</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e495 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e497 ">55000</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e499 ">32</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e501 ">7</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e495 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e497 ">27000</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e499 ">25</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e501 ">5</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e495 ">5</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e497 ">53000</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e499 ">30</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e501 ">5</td>
</tr>
</tbody>
</table>
</div>
<p class="p">The CallDuration values are so much higher than other attribute values that they skew the distribution. Normalizing the raw data to the range [0, 1] solves this problem.</p>
</div>
<div class="section" id="dxb1507750107365__section_lty_1bt_k2b"><h4 class="title sectiontitle">Normalized Input</h4><p class="p">In the following table, the raw input data has been normalized to the range [0, 1] using the Min-Max normalization technique.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dxb1507750107365__table_N100AE_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:20%" /><col style="width:32%" /><col style="width:16%" /><col style="width:32%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e564">UserID</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e566">CallDuration</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e568">SMS</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e570">DataCounter</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e564 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e566 ">0.0000333</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e568 ">0.1</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e570 ">0.2</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e564 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e566 ">0.5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e568 ">0.4</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e570 ">0.4</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e564 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e566 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e568 ">0.9</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e570 ">0.8</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e564 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e566 ">0.01</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e568 ">0.2</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e570 ">0.4</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e564 ">5</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e566 ">0.93</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e568 ">0.7</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e570 ">0.4</td>
</tr>
</tbody>
</table>
</div>
<p class="p">This technique transforms the value 'a' (in column A) to the value 'b' in the range [C, D], using this formula:</p>
<p class="p">b=((<var class="keyword varname">a</var>-<var class="keyword varname">minimum_value_in_A</var>)/(<var class="keyword varname">maximum_value_in_A</var>-<var class="keyword varname">minimum_value_in_A</var>))*(D-C)+C</p>
<p class="p">The following table shows the minimum and maximum values that the formula uses for each input table column.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dxb1507750107365__table_N10150_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"></div><colgroup><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e643">Column</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e645">Minimum Value</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e647">Maximum Value</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e643 ">CallDuration</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e645 ">24999</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e647 ">55001</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e643 ">SMS</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e645 ">23</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e647 ">33</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e643 ">DataCounter</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e645 ">3</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e647 ">8</td>
</tr>
</tbody>
</table>
</div>
<p class="p">From the normalized input data, select one or more users as the reference vector; the remaining users are the target vectors. The choice of reference vector depends on the application. For example, if the mobile telephone service is expanding its range to include a new area with similar users, then one or more typical users (with average or median attribute values) can be the reference vector. When the company has identified similar users in the new area, it can send them promotional offers.</p>
</div>
<div class="section" id="dxb1507750107365__section_kfw_hbt_k2b"><h4 class="title sectiontitle">Reference and Target Tables for Examples</h4><p class="p">For these examples, the reference vector is UserID 5.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dxb1507750107365__table_N101A7_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">ref_mobile_data</span></div><colgroup><col style="width:29.411764705882355%" /><col style="width:47.05882352941176%" /><col style="width:23.52941176470588%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e687">UserID</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e689">Feature</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e691">Value</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e687 ">5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e689 ">CallDuration</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e691 ">0.93</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e687 ">5</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e689 ">SMS</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e691 ">0.7</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e687 ">5</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e689 ">DataCounter</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e691 ">0.4</td>
</tr>
</tbody>
</table>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="dxb1507750107365__table_N101F8_N1000E_N1000C_N10001" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">target_mobile_data</span></div><colgroup><col style="width:22.22222222222222%" /><col style="width:44.44444444444444%" /><col style="width:33.33333333333333%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e724">UserID</th>
<th class="entry nocellnorowborder" style="vertical-align:top;" id="d3725e726">Feature</th>
<th class="entry cell-norowborder" style="vertical-align:top;" id="d3725e728">value1</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">CallDuration</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.0000333</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">SMS</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.1</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">1</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">DataCounter</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.2</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">CallDuration</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.5</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">SMS</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.4</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">2</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">DataCounter</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.4</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">CallDuration</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">1</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">SMS</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.9</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">3</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">DataCounter</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.8</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">CallDuration</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.01</td>
</tr>
<tr class="row"><td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e724 ">4</td>
<td class="entry nocellnorowborder" style="vertical-align:top;" headers="d3725e726 ">SMS</td>
<td class="entry cell-norowborder" style="vertical-align:top;" headers="d3725e728 ">0.2</td>
</tr>
<tr class="row"><td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e724 ">4</td>
<td class="entry row-nocellborder" style="vertical-align:top;" headers="d3725e726 ">DataCounter</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e728 ">0.4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="topic reference nested2" aria-labelledby="ariaid-title8" topicindex="8" topicid="vns1524509567422" xml:lang="en-us" lang="en-us" id="vns1524509567422">
	<h3 class="title topictitle3" id="ariaid-title8">VectorDistance Example: Default Thresholds</h3>

	<div class="body refbody"><div class="section" id="vns1524509567422__section_vwm_fbr_xhb"><h4 class="title sectiontitle">Input</h4><p class="p">See <a class="xref" href="fhm1558121996862.html#dxb1507750107365" title="">VectorDistance Examples Input</a>.</p>
</div>
<div class="section" id="vns1524509567422__section_ohs_g2f_pdb"><h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock"><code>SELECT * FROM VectorDistance(
  ON target_mobile_data as TargetTable PARTITION BY UserID
  ON ref_mobile_data as ReferenceTable DIMENSION
  USING
  TargetIdColumns('UserID')
  TargetFeatureColumn('Feature')
  TargetValueColumn('value1')
  DistanceMeasure('Cosine','Euclidean','Manhattan')
) AS dt ORDER BY 1;</code></pre></div>
<div class="section" id="vns1524509567422__section_kyy_g2f_pdb"><h4 class="title sectiontitle">Output</h4><pre class="pre screen"> target_userid ref_userid type      distance             
 ------------- ---------- --------- -------------------- 
             1          5 euclidean   1.1246501958870991
             1          5 manhattan            1.7299667
             1          5 cosine        0.45486517827424
             2          5 manhattan                 0.73
             2          5 euclidean   0.5243090691567331
             2          5 cosine     0.02608922985452755
             3          5 cosine    0.024150544155866593
             3          5 manhattan                 0.67
             3          5 euclidean   0.4526588119102511
             4          5 manhattan                 1.42
             4          5 euclidean    1.047091209016674
             4          5 cosine     0.43822243299800046</pre>
<p class="p">The following table (which is not output by the VectorDistance function) shows the distances of the target vectors from the reference vector (UserID 5) and their similarity ranks. The shorter the distance, the higher the similarity rank. Similarity rank is independent of measure—if relative distances are shorter in one measure, they are shorter in all measures. UserID 3 is most similar to UserID 5.</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="vns1524509567422__table_kgd_52f_pdb" class="table" frame="border" border="1" rules="all"><div class="caption"><span class="tablecap">Target Distances from Reference and Similarity Ranks</span></div><colgroup><col style="width:20%" /><col style="width:20%" /><col style="width:20%" /><col style="width:20%" /><col style="width:20%" /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d3725e870">target_userid</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d3725e872">Cosine Distance</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d3725e874">Euclidean Distance</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d3725e876">Manhattan Distance</th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d3725e878">Similarity Rank</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e870 ">1</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e872 ">0.454865179</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e874 ">1.124650195</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e876 ">1.7299667</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e878 ">4</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e870 ">2</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e872 ">0.02608923</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e874 ">0.524309065</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e876 ">0.72999999</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e878 ">2</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e870 ">3</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e872 ">0.024150545</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e874 ">0.452658811</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e876 ">0.66999999</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e878 ">1</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e870 ">4</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e872 ">0.438222434</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e874 ">1.047091208</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e876 ">1.41999999</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d3725e878 ">3</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="vns1524509567422__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>

	</div>

</div>
<div class="topic reference nested2" aria-labelledby="ariaid-title9" topicindex="9" topicid="ywe1507910044041" xml:lang="en-us" lang="en-us" id="ywe1507910044041"><h3 class="title topictitle3" id="ariaid-title9">VectorDistance Example: Nondefault Thresholds</h3>
<div class="body refbody"><div class="section" id="ywe1507910044041__section_vws_dbr_xhb"><h4 class="title sectiontitle">Input</h4><p class="p">See <a class="xref" href="fhm1558121996862.html#dxb1507750107365" title="">VectorDistance Examples Input</a>.</p>
</div>
<div class="section" id="ywe1507910044041__section_N10011_N1000E_N10001"><p class="p">This example uses the MaxDistance syntax element to limit the output to target vectors within the specified distances for each measure.</p>
</div>
<div class="section" id="ywe1507910044041__section_ohs_g2f_pdb"><h4 class="title sectiontitle">SQL Call</h4><pre class="pre codeblock"><code>SELECT * FROM VectorDistance(
  ON target_mobile_data as TargetTable PARTITION BY UserID
  ON ref_mobile_data as ReferenceTable DIMENSION
  USING
  TargetIdColumns('UserID')
  TargetFeatureColumn('Feature')
  TargetValueColumn('value1')
  DistanceMeasure('Cosine','Euclidean','Manhattan')
  MaxDistance(0.03,0.8,1.0)
) AS dt ORDER BY 1;</code></pre></div>
<div class="section" id="ywe1507910044041__section_kyy_g2f_pdb"><h4 class="title sectiontitle">Output</h4><p class="p">Only UserID 2 and UserID 3 meet the threshold criteria.</p>
<pre class="pre screen"> target_userid ref_userid type      distance             
 ------------- ---------- --------- -------------------- 
             2          5 manhattan                 0.73
             2          5 euclidean   0.5243090691567331
             2          5 cosine     0.02608922985452755
             3          5 manhattan                 0.67
             3          5 euclidean   0.4526588119102511
             3          5 cosine    0.024150544155866593</pre>
<p class="p">Download a zip file of all examples and a SQL script file that creates their input tables from the download tab <img class="image" id="ywe1507910044041__d21e16" src="enx1538431836629.png" /> in the left pane.</p>
</div>
</div>
</div>
</div>
</div>
</body>
</html>